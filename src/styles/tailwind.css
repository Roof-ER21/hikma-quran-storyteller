@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   MOBILE-FRIENDLY GLOBAL STYLES
   ======================================== */

@layer base {
  /* Safe area insets for notched phones (iPhone X+, etc.) */
  :root {
    --safe-area-inset-top: env(safe-area-inset-top, 0px);
    --safe-area-inset-right: env(safe-area-inset-right, 0px);
    --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
    --safe-area-inset-left: env(safe-area-inset-left, 0px);
  }

  /* Prevent body scroll issues on iOS */
  html {
    height: -webkit-fill-available;
    overflow-x: hidden;
  }

  body {
    min-height: 100vh;
    min-height: -webkit-fill-available;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    /* Prevent pull-to-refresh on PWA */
    overscroll-behavior-y: contain;
  }

  /* Ensure all main containers can scroll */
  #root {
    min-height: 100vh;
    min-height: -webkit-fill-available;
    display: flex;
    flex-direction: column;
  }

  /* Improve touch targets for mobile */
  button, a, [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Prevent text size adjustment on orientation change */
  * {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }
}

@layer components {
  /* Mobile-safe scrollable container */
  .mobile-scroll {
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }

  /* Horizontal scroll container (for carousels, tabs) */
  .mobile-scroll-x {
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x mandatory;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
  .mobile-scroll-x::-webkit-scrollbar {
    display: none;
  }

  /* Full-screen mobile page */
  .mobile-page {
    min-height: 100vh;
    min-height: -webkit-fill-available;
    padding-bottom: var(--safe-area-inset-bottom);
  }

  /* Fixed bottom bar with safe area */
  .mobile-bottom-bar {
    padding-bottom: max(1rem, var(--safe-area-inset-bottom));
  }

  /* Fixed top bar with safe area */
  .mobile-top-bar {
    padding-top: max(1rem, var(--safe-area-inset-top));
  }

  /* Prevent content from going under notch */
  .safe-area-padding {
    padding-left: var(--safe-area-inset-left);
    padding-right: var(--safe-area-inset-right);
  }
}

@layer utilities {
  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Thin scrollbar for better mobile UX */
  .scrollbar-thin {
    scrollbar-width: thin;
  }
  .scrollbar-thin::-webkit-scrollbar {
    width: 4px;
    height: 4px;
  }

  /* Touch-friendly spacing */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Prevent text selection on interactive elements */
  .no-select {
    -webkit-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
  }

  /* Smooth momentum scrolling */
  .momentum-scroll {
    -webkit-overflow-scrolling: touch;
  }

  /* Full viewport height accounting for mobile browsers */
  .h-screen-safe {
    height: 100vh;
    height: -webkit-fill-available;
  }

  .min-h-screen-safe {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }

  /* Safe area padding utilities */
  .pb-safe {
    padding-bottom: max(1rem, var(--safe-area-inset-bottom));
  }

  .pt-safe {
    padding-top: max(0.5rem, var(--safe-area-inset-top));
  }

  .px-safe {
    padding-left: var(--safe-area-inset-left);
    padding-right: var(--safe-area-inset-right);
  }
}
